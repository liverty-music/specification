# Liverty Music MVP: Onboarding & Dashboard UX/UI Specification

**Document Version:** 3.1 (Post-Onboarding Region Setup Edition)
**Target:** MVP (Minimum Viable Product) / Web App (PWA)
**Product Goal:** 音楽ファンの「ライブ情報見逃し（FOMO）」を根絶する「Pain Killer」アプリ。

## 1. 概要 (Overview)

本仕様書は、Liverty Musicの初回訪問ユーザーが体験する「ファーストビュー  サインアップ  アーティスト登録  ダッシュボード到達」までの一連のUX/UI要件、および技術的制約を定義する。
ユーザーの入力負担を最小化するため、エリア設定などのセットアップは、価値を提供する直前のタイミング（Just-in-Time）で要求する設計とする。

---

## 2. ユーザーストーリーと画面遷移フロー

1. **LP (First View):** サービス価値の理解とGoogleサインイン。
2. **Artist Discovery (Bubble UI):** Last.fm APIを利用した、ゲーム感覚のアーティストフォロー。
3. **Loading (Benevolent Deception):** ユーザーの期待感を高めるダッシュボード構築演出。
4. **Region Setup & Dashboard (Live Highway):** 初回ダッシュボード表示時にエリアを入力させ、直後に距離と時間を軸にした3列タイムテーブル型UIを展開。

---

## 3. 各画面の詳細UI/UX仕様

### Step 1: LP & Authentication (ファーストビュー)

* **目的:** 離脱を防ぎ、最短で認証させる。
* **UI要素:**
* **Hero Copy:** 「大好きなあのバンドのライブ、もう二度と見逃さない。」
* **Sub Copy:** 「あなたの推しアーティストを登録するだけで、全国のライブ日程を自動収集。」
* **CTA (Call to Action):** `[Continue with Google]` ボタンのみ配置。
* *Dev Note:* Spotify/Apple Music/YouTube等のOAuth連携はMVPスコープ外。Google認証のみ（Zitadelを使用）。





### Step 2: Artist Discovery (The "DNA Extraction" UI)
* **目的:** ユーザーの好みのアーティストをテンポよく、ゲーム感覚でフォローさせる。画面の煩雑さを防ぎ、収集する快感（ゲーミフィケーション）を提供する。
* **データソース:** Last.fm API (認証不要)。
* **UI/UX動作要件:**
  1. **初期表示:** * 画面中央エリア: Last.fmの `geo.getTopArtists` (country=japan) をコールし、上位約30組のアーティストを物理演算で浮かぶバブルとして配置する。
     * 画面下部: ユーザーの好みを蓄積する器となる「Music DNA オーブ（ガラス玉のようなUI）」を配置する。
  2. **タップ時アクション (Follow & Extract):**
     * バブルをタップすると、そのバブルが縮小し、軌跡を描きながら画面下部の「DNA オーブ」に吸い込まれて消滅する（インベントリ収納エフェクト）。
     * 吸い込まれると同時に、オーブ内部のエフェクト（渦巻く光やパーティクル）が強くなり、フォロー数に応じて色が濃く、眩しく変化していく。
  3. **連鎖アクション (Chain Reaction):**
     * タップされたアーティストをキーに Last.fmの `artist.getSimilar` をコール。
     * 類似アーティストのバブルが、元のバブルがあった位置から「ポンッ」と分裂するように新たに出現する。
  4. **Instant Feedback (ダイナミック・トースト):**
     * バックグラウンドで自社DBを照合し、タップしたアーティストの「未来のライブ予定」が存在した場合、オーブに吸い込まれた瞬間に画面上部から躍動感のあるトースト通知（例: `🎫 [アーティスト名]のライブ予定あり！`）を2〜3秒間だけ表示し、フェードアウトさせる。
  5. **完了アクション:**
     * オーブの横、またはオーブ自体をタップ可能なボタンとし、`[ライブ日程を見る (◯組)]` というテキストを表示。タップでダッシュボード構築処理（Step 3）へ遷移する。


3. **連鎖アクション (Chain Reaction):**
* タップされたアーティストをキーに Last.fmの `artist.getSimilar` をコール。
* 類似アーティストの小さなバブルが、親バブルから「ポンッ」と分裂・派生するように画面に出現する。


4. **完了アクション:**
* 画面下部に常にフローティング表示されている `[ダッシュボードを作成する (◯組フォロー中)]` ボタンをタップして次へ。





### Step 3: Loading Sequence (The "Benevolent Deception")

* **目的:** フォローしたアーティストのライブ情報を自社DB（およびGemini APIでの不足分検索）から取得・構築する際の「待ち時間（数秒〜10秒）」を演出でカバーする。
* **UI要件:**
* 単なるスピナーは禁止。ステップ進行型のテキストアニメーションを実装する。
* **Phase 1 (0-2s):** 「あなたのMusic DNAを構築中...」
* **Phase 2 (2-5s):** 「全国のライブスケジュールと照合中...」
* **Phase 3 (5s-):** 「AIが最新のツアー情報を検索中... 🤖」
* *Dev Note:* この間にバックエンドで対象アーティストのライブ情報を取得する。処理が早く終わっても、最低3秒は演出を見せてからStep 4へ遷移すること。





### Step 4: Dashboard - "Live Highway" UI
* **UI構造:** * **Y軸 (時間):** 画面左端（またはレーンの区切り）に「月・日」を固定/スクロール追従で表示。
  * **X軸 (距離):** 居住地を基準とした3列のレーン。

* **レイアウト比率とタイポグラフィ特化UI (Typographic Card Design):**
  * **[重要要件] 画像アセットの不使用:**
    著作権および運用コスト回避のため、MVPではアーティスト画像を使用しない。代わりに、アーティスト名の文字列から一意のテーマカラー（HSLベース等の動的カラー）を生成し、カードの背景色またはアクセントカラーとして適用し、視覚的な退屈さを防ぐこと。

  * **Lane 1: My City (メイン車線 / 画面幅の45-50%)**
    * **対象:** 登録した都道府県のライブ。
    * **UI:** メガ・タイポグラフィ型の大型カード。
    * **要素:** * アーティスト名（極太フォントで大きく、カードの主役として配置）
      * *(NG要素: 画像、日付、会場名は表面に出さない)*
  * **Lane 2: My Region (隣接車線 / 画面幅の30%)**
    * **対象:** 登録都道府県と同じ「地方」のライブ。
    * **UI:** 情報圧縮型の中サイズカード。
    * **要素:** アーティスト名 ＋ **開催都道府県名**（例: 「福岡」）。背景は単色または控えめなグラデーション。
  * **Lane 3: Others (対向車線 / 画面幅の20%)**
    * **対象:** それ以外の全国のライブ。
    * **UI:** テキストのみのリスト。
    * **要素:** アーティスト名 ＋ 主要都市名（例: "Osaka"）。

* **タップ時のアクション (The Detail Modal):**
  * どのレーンのカードをタップしても、画面下部から**詳細ボトムシート**が素早く立ち上がる。
  * **モーダル内表示要素:**
    * アーティスト名（大きく表示）
    * **日付・開演時間**
    * **会場名** (Google Maps等へのリンク)
    * `[🔗 公式情報を見る]` ボタン (遷移先リンク)
    * `[📅 カレンダーに追加]` ボタン




---

## 4. エンゲージメント施策 (Next Actions)

ファーストビューやオンボーディング中にシステム権限の許可を求めないこと（許可疲れの防止）。以下のタイミングでトリガーする。

1. **Push通知の要求:**
* ユーザーがダッシュボード上でいずれかのライブカードの `[🔗 公式情報を見る]` をタップした**直後（またはアプリに戻ってきたタイミング）**。
* 「このアーティストの次回ツアー発表を通知しますか？」というコンテキスト付きのカスタムモーダルを表示してから、ブラウザのネイティブPush許可ダイアログを出す。


2. **PWAインストール要求:**
* ユーザーの**2回目のセッション（再訪問時）**に、画面下部のトースト通知で「ホーム画面に追加すると便利です」と控えめに案内する。



---

## 5. 開発者向け注意事項 (Technical Constraints for AI Agent)

* **Performance:** Step 2 (Bubble UI) では、多数のDOM要素（バブル）が動くため、React/Vue実装の際は再レンダリングの最適化（`React.memo` や適切な State 管理）、あるいは Canvas API / WebGLベースの物理エンジン（Matter.js等）の使用を検討すること。
* **Backend Fallback:** Step 3のデータ構築時、対象アーティストのライブ情報が自社DBに存在しない場合は Gemini API を用いてWeb検索（Grounding）を行う想定だが、レスポンスが10秒を超える場合はタイムアウトとし、**取得できたアーティストの情報のみ**でダッシュボードをレンダリングすること（無限ロードの禁止）。
* **Mobile First:** Live Highway UIはPCではなく、スマートフォンの縦画面で片手スクロールされることを大前提にCSS（Grid / Flexbox）を設計すること。意図しない横スクロールは発生させてはならない。

